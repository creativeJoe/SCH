var Drawerjs=function(){'use strict';var t=function(t){this.options={align:'left',compact:!1,fixed:!1,forcePos:!1,holder:'#drawerjs-holder',holderClass:'drawerjs-holder',nested:!1,open:!1,pinned:!1,selector:'#drawerjs',selectorClass:'drawerjs',width:'200px',compactWidth:'60px',useCustom:!1,autoConfig:!1,_cleanStorage:!1,holderBehavior:!0,toggleScreen:'992px',backdrop:!0},t=t||{},t.width=t.width?this._validateUnit(t.width):this.options.width,t.compactWidth=t.compactWidth?this._validateUnit(t.compactWidth):this.options.compactWidth,window.matchMedia&&(this.options.fixed=!matchMedia('only screen and (min-width: '+this._validateUnit(this.options.toggleScreen)+')').matches,this.options.open=matchMedia('only screen and (min-width: '+this._validateUnit(this.options.toggleScreen)+')').matches,this.options.pinned=matchMedia('only screen and (min-width: '+this._validateUnit(this.options.toggleScreen)+')').matches),this.options=this._extend({},this.options,t),this.options=null===this._getState()?this.options:this._getState(),this.selector='object'==typeof this.options.selector?this.options.selector:document.querySelector(this.options.selector),this.holder=this.options.holder?document.querySelector(this.options.holder):document.querySelector('body'),this.wrapper=this.holder.parentNode,this.hash=Math.random().toString(36).substring(7),this.classes={alignRight:this.options.selectorClass+'-has-right',compact:this.options.selectorClass+'-has-compact',fixed:this.options.selectorClass+'-has-fixed',open:this.options.selectorClass+'-has-open',close:this.options.selectorClass+'-has-close',slideIn:this.options.selectorClass+'-has-slideIn',pinned:this.options.selectorClass+'-has-pinned',wrapper:this.options.selectorClass+'-wrapper'},this.init()};return t.prototype._onReady=function(t){'loading'!=document.readyState?t():document.addEventListener('DOMContentLoaded',t,!1)},t.prototype._extend=function(t){t=t||{};for(var e=arguments,s=1;s<e.length;s++)if(e[s])for(var i in e[s])e[s].hasOwnProperty(i)&&(t[i]=e[s][i]);return t},t.prototype._validateUnit=function(t){var e=/(^[\d]+((px)|(vw)|(r?em)|(\%))$)|^(initial|inherit|auto|0)$/i;return e.test(t)?t:/[^\.\sa-z]\d*\.?\d*/g.exec(t)[0]+'px'},t.prototype._emit=function(t,e){var s;document.createEvent?(s=document.createEvent('Event'),s.initEvent(t,!0,!0)):(s=document.createEventObject(),s.eventType=t),s.eventName=t,s.data=e||this,document.createEvent?this.selector.dispatchEvent(s):this.selector.fireEvent('on'+t,s)},t.prototype._on=function(t,e,s){for(var i=e.split(' '),o=0;o<i.length;o++)t[window.addEventListener?'addEventListener':'attachEvent'](window.addEventListener?i[o]:'on'+i[o],s,!1)},t.prototype._off=function(t,e,s){for(var i=e.split(' '),o=0;o<i.length;o++)t[window.removeEventListener?'removeEventListener':'detachEvent'](window.removeEventListener?i[o]:'on'+i[o],s,!1)},t.prototype._addClass=function(t,e){for(var s=e.split(' '),i=0;i<s.length;i++)t.classList?t.classList.add(s[i]):t.classes[i]+=' '+s[i]},t.prototype._removeClass=function(t,e){for(var s=e.split(' '),i=0;i<s.length;i++)t.classList?t.classList.remove(s[i]):t.classes[i]=t.classes[i].replace(new RegExp('(^|\\b)'+s[i].split(' ').join('|')+'(\\b|$)','gi'),' ')},t.prototype._drawerWidth=function(t){return t?this.options.compactWidth:this.options.width},t.prototype._renderWidth=function(){this.selector.style.width=this._drawerWidth(this.isCompact())},t.prototype._clearSpace=function(){this.holder.style.paddingRight=0,this.holder.style.paddingLeft=0,this.holder.style.marginRight=0,this.holder.style.marginLeft=0,this.holder.style.transform=''},t.prototype._holderSpace=function(){var t=this.options,e=t.holder?'margin':'padding';this._clearSpace(),!t.holderBehavior||this.isCompact()||matchMedia('only screen and (min-width: '+this._validateUnit(this.options.toggleScreen)+')').matches?t.pinned&&t.open&&('right'===t.align?this.holder.style[e+'Right']=this._drawerWidth(this.isCompact()):'left'===t.align&&(this.holder.style[e+'Left']=this._drawerWidth(this.isCompact()))):t.pinned&&t.open&&('right'===t.align?this.holder.style.transform='translateX(-'+this._drawerWidth(this.isCompact())+')':'left'===t.align&&(this.holder.style.transform='translateX('+this._drawerWidth(this.isCompact())+')'))},t.prototype._backdrop=function(){var t=this,e='backdrop-'+this.hash,s=this.options,i=document.querySelector('body'),o=document.createElement('div');if(o.setAttribute('id',e),this._addClass(o,s.selectorClass+'-backdrop'),!this.isPinned()&&s.backdrop){var r=document.querySelector('#'+e);i.contains(r)||(i.appendChild(o),this._on(o,'click',function(){t.close()})),this.isOpen()&&(document.querySelector('#'+e).style.display='block')}else{var n=document.querySelector('#'+e);i.contains(n)&&n.parentNode.removeChild(n)}},t.prototype._transitionIn=function(){this._addClass(this.selector,this.classes.slideIn),this.selector.style.width=this._drawerWidth(this.isCompact());var t=this.options.forcePos;t.hasOwnProperty('height')&&(this.selector.style.height=t.height)},t.prototype._transitionOut=function(){this._removeClass(this.selector,this.classes.slideIn),this.selector.style.width=0;var t=this.options.forcePos;t.hasOwnProperty('height')&&(this.selector.style.height=0)},t.prototype._transitionEnd=function(t){var e={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'};for(var s in e)if(void 0!==t.style[s])return e[s]},t.prototype._addFakeHeight=function(){var t=window.getComputedStyle(this.selector).backgroundColor;this.wrapper.style.backgroundColor=t},t.prototype._removeFakeHeight=function(){this.wrapper.style.backgroundColor=''},t.prototype._setState=function(t,e){t&&(this.options[t]=e),('string'==typeof this.options.autoConfig||this.options.autoConfig instanceof String)&&localStorage.setItem('drawerjs_'+this.options.autoConfig,JSON.stringify(this.options)),this._emit('drawer:stateChanged')},t.prototype._getState=function(){return JSON.parse(localStorage.getItem('drawerjs_'+this.options.autoConfig))},t.prototype.init=function(){var t=this,e=this.options;if(this._addClass(this.selector,e.selectorClass),this._addClass(this.holder,e.holderClass),this._addClass(this.wrapper,this.classes.wrapper),this._renderWidth(),this._addClass(this.selector,e.selectorClass+'-hold-transition'),this._addClass(this.holder,e.selectorClass+'-hold-transition'),this._on(this.selector,this._transitionEnd(this.selector),function(){t.isOpen()||(t.selector.style.opacity='0',t.selector.style.visibility='hidden')}),this.selector.hasChildNodes()){var s=this.selector.children;Array.prototype.forEach.call(s,function(e){t._on(e,t._transitionEnd(e),function(t){t.stopPropagation()})})}e.nested&&(this.wrapper.style.position='relative'),this.autoConfig(e.autoConfig),this.align(e.align),this.compact(e.compact),this.fixed(e.fixed),this.forcePos(e.forcePos),this.pinned(e.pinned),this.custom(e.useCustom),this.isOpen()?this.open():this.close(),this._setState(),this._onReady(function(){setTimeout(function(){t._removeClass(t.selector,e.selectorClass+'-hold-transition'),t._removeClass(t.holder,e.selectorClass+'-hold-transition')},150),t._emit('drawer:init')})},t.prototype.autoConfig=function(t){try{if(t===!0)throw{name:'Drawerjs Warning',msg:'You must have a unique namescpace for each Drawer!'}}catch(t){console.warn(t.name+': '+t.msg)}return this.options.autoConfig&&this.options._cleanStorage&&localStorage.removeItem('drawerjs_'+this.options.autoConfig),this._setState('autoConfig',t),this._emit('drawer:autoConfig'),this},t.prototype.align=function(t){var e=this.classes;return'right'===t?this._addClass(this.selector,e.alignRight):this._removeClass(this.selector,e.alignRight),this._setState('align',t),this._holderSpace(),this._emit('drawer:align'),this},t.prototype.isCompact=function(){return this.options.compact},t.prototype.compact=function(t){var e=t?'_addClass':'_removeClass',s=this.classes;return this[e](this.selector,s.compact),this._setState('compact',t),this._renderWidth(),this._holderSpace(),this._emit('drawer:compact'),this},t.prototype.isFixed=function(){return this.options.fixed},t.prototype.fixed=function(t){var e=t?'_addClass':'_removeClass',s=this.classes;return t?this._removeFakeHeight():this._addFakeHeight(),this[e](this.selector,s.fixed),this.selector.style.display='none',this.selector.offsetHeight,this.selector.style.display='',this._setState('fixed',t),this._emit('drawer:fixed'),this},t.prototype.isOpen=function(){return this.options.open},t.prototype.open=function(){var t=this.classes;if(this._transitionIn(),this._addClass(this.selector,t.open),this._removeClass(this.selector,t.close),this.selector.style.overflow='',this.selector.style.opacity='',this.selector.style.visibility='',!this.isPinned()&&this.options.backdrop){var e=document.querySelector('#backdrop-'+this.hash);e.style.display='block'}return this._setState('open',!0),this._holderSpace(),this._emit('drawer:open'),this},t.prototype.close=function(){var t=this.classes;if(this._transitionOut(),this._addClass(this.selector,t.close),this._removeClass(this.selector,t.open),this.selector.style.overflow='hidden',!this.isPinned()&&this.options.backdrop){var e=document.querySelector('#backdrop-'+this.hash);e.style.display=''}return this._setState('open',!1),this._holderSpace(),this._emit('drawer:close'),this},t.prototype.toggle=function(){var t=this.isOpen()?'close':'open';return this[t](),this},t.prototype.isPinned=function(){return this.options.pinned},t.prototype.pinned=function(t){var e=t?'_addClass':'_removeClass',s=this.classes;return this[e](this.selector,s.pinned),this._setState('pinned',t),this._backdrop(),this._holderSpace(),this._emit('drawer:pinned'),this},t.prototype.getWidth=function(){return this.options.width},t.prototype.setWidth=function(t){return this._setState('width',this._validateUnit(t)),this._renderWidth(),this._holderSpace(),this._emit('drawer:changeWidth'),this},t.prototype.getCompactWidth=function(){return this.options.compactWidth},t.prototype.setCompactWidth=function(t){return this._setState('compactWidth',this._validateUnit(t)),this._renderWidth(),this._holderSpace(),this._emit('drawer:changeCompactWidth'),this},t.prototype.forcePos=function(t){var e=this;if('object'==typeof t){for(var s in t){var i=/^(top|left|right|bottom|width|height)$/g;i.test(s)?(e.selector.style.minHeight=0,e.selector.style[s]=e._validateUnit(t[s])):console.warn('This method doesn\'t support for css '+s+'. Only support for top|right|bottom|left|width|height.')}t.hasOwnProperty('height')&&(this.selector.style.minHeight=0),t.hasOwnProperty('width')&&this.setWidth(t.width),(t.hasOwnProperty('top')||t.hasOwnProperty('bottom'))&&t.hasOwnProperty('right')&&t.hasOwnProperty('left')&&(this.selector.style.transition='height 150ms linear'),t.hasOwnProperty('right')&&t.hasOwnProperty('left')&&(this.selector.style.maxWidth='100%',this.selector.style.transform='translateX(0)')}else this.selector.style.maxWidth='',this.selector.style.minHeight='',this.selector.style.transform='',this.selector.style.transition='',this.selector.style.top='',this.selector.style.right='',this.selector.style.bottom='',this.selector.style.left='';return this._setState('forcePos',t),this._emit('drawer:forcePos'),this},t.prototype.custom=function(t){var e=this;if(t.hasOwnProperty('drawer')||t.hasOwnProperty('holder')){for(var s in t)for(var i in t[s]){var o=/^(drawer|holder)$/g,r=/^(backgroundColor|color)$/g,n='drawer'===s?'selector':'holder';o.test(s)&&r.test(i)?e[n].style[i]=t[s][i]:console.warn('Unsupported property in useCustom: '+s+' or '+i+' is not a supported property.')}this._addFakeHeight()}else this.selector.style.backgroundColor='',this.selector.style.color='',this.holder.style.backgroundColor='',this.holder.style.color='',this._removeFakeHeight();return this._setState('useCustom',t),this._emit('drawer:custom'),this},t}();
//# sourceMappingURL=drawerjs.min.js.map
